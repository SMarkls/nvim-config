# Сборка NeoVim
Минималистичная сборка NeoVim для работы на `JavaScript`, `TypeScript`, `GoLang`. (В планах добавить `Python` и `C(++)`)

Чтобыть начать работу с каким-то инструментом необходимо через `:Mason` установить cоответствующие
`Language Server Protocol` и `Debug Adapter Protocol`, а также линтеры/форматтеры.   
**По настройке инструментария для конкретных яызков смотреть [эту часть](#настройка-языкоспецифичного-инструментария)**
После этого **ОБЯЗАТЕЛЬНО** указать в файлах в папке `languages`
* `lua/plugins/conform.lua` названия форматтеров и языков.
* `lua/plugins/nvim-lint.lua` - название линтеров и языков
* `lua/plugins/lsp.lua` - название `LSP`
* `lua/plugins/LSP/` - конфигурация LSP, а также комбинации клавиш, которые должны активироваться, когда запущен данный LSP

## Плагины
* Bufferline - табы, вкладки как в браузере
* GitSigns - отображение, что было добавлено/изменено в рамках текущего индекса (`:Gitsigns`)
* Neo-Tree - менеджер файловой системы (:Neotree)
* LuaLine - строка состояния снизу, пишет про гит, ошибки и прочее
* Telescope - поиск файлов, вхождений строк по проекту, подсказок и табов (`:Telescope`)
* Cmp - подсказки в коде (выпадающие)
* ToggleTerm - терминал.
* Dressing - всплывающее окно для быстрых действий(переименования выборов и прочего)
* Conform - форматтер.
* Nvim-Lint - линтер.
* Leap - продвинутые перемещения
* Which-Key - панелька с хоткеями

## Кастомные кеймапы
* space + e - файловая система
* space + w - сохранить
* space + q - закрыть
* | - разделить окно по-вертикали
* \ - разделить окно по-горизонтали
* ctrl + `h(jkl)` - переместиться на левое(нижнее, верхнее, правое) разделенное окно
* Tab/Shift + Tab - перемещение по буфферам
* ctrl + x - закрыть все буфферы, кроме текущего
* space + х - выбрать, какие буферы закрыть
* space + ff - найти файлы в проекте
* space + fw - найти слова в проекте
* space + fb - найти вкладки(буфферы) в проекте
* space + fh - найти подсказки в проекте
* space + lr - переименовать
* space + la - быстрые код экшны
* ctrl + \ - открытие/закрытие терминалах
* space + aa - все ошибки и варнинги в проекте
* space + aA - ошибки и варнинги в текущем буфере
* shift + K - показать сигнатуру
* ctrl + K - подсказка по текущему вводимому парметру метода

Прочие кеймапы можно посмотреть в конфигурации самостоятельно. Большая их часть находится в `config/keymap.lua`, а также специфичные
для каждого плагина где-то рядом с ним.

## Настройка языкоспецифичного инструментария
Чтобы настроить окружения для разработки на каком-то специфичном языке необходимо создать в папке `plugins/languages` соответствующий файл. Сразу же не отходя от файловой системы в `langs.lua` добавить его в
таблицу. Далее в созданном файле создаем таблицу (объект), у которого есть следующие поля:
* `lsp_name`: _string_ - название Language Server из Mason, который используется для работы с этим языком
* `lsp(capabilites, lspconfig) => void` - функция, в которой происходит настройка Language Server
* `formatter() => {}` - функция, в которой указывается название языка как ключ и значение - форматтеры, используемые для языка
* `linter() => {}` - функция, в которой указывается название языка как ключ и значение - линтеры, используемые для языка
* `keybindings()` - здесь заполняются сочетания клавиш, которые будут работать только в том случае, если будет запущен Language Server, указанный в `lsp_name`. Здесь стоит указывать биндинг
брейкпоинтов, запуск дебага и плагины, специфичные для конкретного языка.

## Список пакетов Mason
Эти пакеты необходимо установить для корректной работы. Не обязательно устанавливать все из них. Достаточно лишь тех, которые вы будете использовать.
```lua
"debugpy", -- python DAP
"delve", -- go DAP
"eslint-lsp", -- js/ts lsp
"eslint_d", -- js/ts lsp
"gofumpt", -- go format
"goimports", -- go formata
"gopls", -- go lsp
"lua-language-server", -- lua lsp
"prettier", -- ts/js format
"prettierd", -- ts/js format
"ruff", -- python format lint lsp
"selene", -- lua format
"typescrpt-language-server", -- ts/js lsp
```

## Разработка на GoLang
Конфигурация готова из коробки для работы с GoLang. Для отладки изменений используется Delve.
Команды Delve начинаются с `Dlv`. Например для начала отладки: `:DlvDebug`
Чтобы поставить брикпоинт: `space + b`. Настройка комбинации в `lua/plugins/languages/go.lua`

## Разработка на Python
Конфигурация __почти__ готова из коробки для работы с Python. Также поддерживается дополнительная конфигурация форматтинга и линтинга с помощью
[ruff](https://docs.astral.sh/ruff/configuration/). Для начала отладки нужно использовать `:DapNew`. Для брикпоинта тот же `space + b`.  
* Шаг с заходом - **F1**
* Шаг с обходом - **F2**
* Шаг с выходом - **F3**
* Продолжить выполнение - `:DapContinue`
Настройка комбинаций в `lua/plugins/languages/py.lua`

Для отладки нужно установить `debugpy`. Сделать это можно глобально: `python3 -m pip install debugpy`. Или создав венв. Во втором случае необходимо
в файле `lua/plugins/nvim-dap-python` указать путь до этого венва.
